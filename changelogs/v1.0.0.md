# 변경 기록 - v1.0.0

## 날짜: 2025-12-22
## 변경 내역 기록 시작

### 🛠️ 기능 추가 (Features)
1.  **전문가 모드 강화**:
    *   기본 논리 게이트(AND, OR, NOT, NAND, NOR)의 **내부 회로도(Schematic)** 데이터 추가.
    *   **내부 편집 모드(Drill-down)**: 전문가 모드에서 게이트를 더블 클릭하면 **팝업창**이 뜨면서 내부 트랜지스터 회로를 수정할 수 있게 됨.
    *   메인 회로와 내부 회로의 작업 공간을 분리하여 관리하는 로직 구현.

2.  **UI 인터페이스 통합**:
    *   **오른쪽 사이드바 제거**: 화면 분산을 막기 위해 제거.
    *   **메뉴 통합**: "상위로 가기(Back)" 버튼과 "내 패키지" 목록을 **왼쪽 도구 상자**의 전문가 전용 메뉴로 이동.
    *   **접기 기능**: 왼쪽 도구 상자를 접었다 폈다 할 수 있는 토글 버튼 추가.

3.  **디자인 개선**:
    *   **트랜지스터 아이콘**: 기존의 투박한 네모 박스를 제거하고, 전자공학 표준 **회로 기호(SVG)**로 변경 (NPN, PMOS).

4.  **시뮬레이션 엔진 업데이트**:
    *   `CircuitSimulator`가 메인 화면과 팝업창(내부 회로)을 번갈아 가며 제어할 수 있도록 구조 변경.
    *   `enterComponent`(진입) 및 `exitComponent`(나오기) 함수 재작성: 메인 회로 상태를 메모리에 보존하면서 내부 회로로 전환.

### 🐛 버그 수정 (Fixes)
*   **드래그 위치 보정**: 부품 드래그 시 마우스 위치와 부품 위치가 어긋나던 현상 수정 (모델 좌표계 계산 로직 개선).
*   **문법 오류**: `GATE_SCHEMATICS` 정의 시 발생했던 괄호 누락/중복 오류 수정.

### 📝 기타 노트
*   **A / B 포트 설명**: 내부 회로에 보이는 초록색 'A', 'B' 박스는 외부 게이트 핀으로 연결되는 **입력 단자**임이 확인됨.

### 🎨 디자인 업데이트 (Visuals)
*   **트랜지스터 시인성 개선**: NPN 및 PMOS 트랜지스터의 회로 기호 선 두께를 강화하여 식별하기 쉽게 개선.
*   **논리 게이트 심볼 적용**:
    *   기존의 사각형 박스 형태를 제거.
    *   **AND**: D자형 표준 심볼 적용.
    *   **OR**: 방패형 표준 심볼 적용.
    *   **NOT**: 삼각형(버퍼) + 반전 원형 심볼 적용.
    *   **XOR/XNOR**: 이중 곡선이 포함된 표준 심볼 적용.
    *   각 게이트의 텍스트 라벨을 숨기고 기호 자체로 기능을 표현하도록 변경.

### 🌍 다국어 지원 (Localization)
*   **게이트 이름 한글화**: 한국어 모드일 때, 도구 상자의 버튼 이름이 한글로 표시되도록 수정 (예: "AND Gate" -> "AND 게이트").
*   언어 변경 시 버튼 텍스트가 즉시 반영되도록 `setLanguage` 함수 개선.

### 🏠 대시보드 (Dashboard)
*   **프로젝트 삭제 기능**: 대시보드 카드 우측 상단에 삭제 버튼(🗑️) 추가.
    *   삭제 시 확인 팝업을 띄우고, 로컬 스토리지에서 해당 프로젝트 데이터를 영구 삭제하도록 구현.

### 🐛 버그 수정 (Fixes)
*   **시뮬레이터 로딩 오류 해결**:
    *   언어 설정(`updateUIText`) 함수 내에서 정의되지 않은 변수 `lang`을 참조하여 스크립트 실행이 중단되던 치명적인 오류 수정.
    *   이로 인해 도구 상자의 모든 버튼이 클릭되지 않던 문제가 해결됨.
*   **게이트 선택 불가 문제 해결**:
    *   새로운 디자인 적용 시 함께 설정된 `box-shadow: none !important` 속성 때문에 선택 표시(붉은 테두리)가 나타나지 않던 문제 해결.
    *   선택된 상태(`.selected`)일 때 강력한 테두리 및 그림자 효과가 최우선으로 적용되도록 CSS 우선순위 조정.

### 🔍 전체 코드 검사 및 최적화 (Audit)
*   **드래그 로직 재검증**:
    *   부품 드래그 시 좌표 계산 방식을 화면 좌표 기준에서 **모델 좌표(Model Coordinates) 기준**으로 완전 전환하여, 줌/팬 상태에서도 오차 없이 정확하게 움직이도록 수정.
    *   이전 패치에서 누락되었던 `onMouseDown` 함수의 좌표 오프셋 계산 로직을 정상적으로 반영.
*   **코드 안정성 확인**:
    *   `simulator.js`, `style.css`, `dashboard.html` 전반의 문법 및 참조 0오류 재확인 완료.
    *   `deleteProject`, `updateUIText` 등 최근 추가된 기능들의 동작 로직 검증 완료.

### ⚡ 사용자 경험 개선 (UX)
*   **전선 꺾기(Joint) 기능 제한 해제**:
    *   기존에는 '전문가 모드'에서만 빈 공간을 클릭하여 전선을 꺾을 수 있었으나, 이를 **모든 모드**에서 가능하도록 변경.
    *   초보자도 더 자유롭고 깔끔하게 회로를 배선할 수 있도록 개선.

### 🚫 중요 오류 수정 (Critical Fixes)
*   **좌클릭/버튼 먹통 현상 해결**:
    *   `const sim`으로 선언된 시뮬레이터 인스턴스를 `window.sim`으로 변경하여 전역 접근성 확보. HTML 버튼(`onclick="sim..."`)이 정상적으로 `sim` 객체를 찾을 수 있게 됨.
    *   브라우저 호환성을 위해 이모지(Emoji) 감지 정규식(`\p{Emoji}`)을 안전한 코드로 대체하여 스크립트 실행 중단 방지.
*   **클릭 우선순위(Z-Index) 재조정**:
    *   사용자가 부품을 클릭하려 할 때 전선 레이어나 다른 요소가 간섭하지 않도록, 부품(`z-index: 50`)과 핀(`z-index: 60`)의 화면 우선순위를 대폭 상향 조정.
    *   마우스 강조(Hover)는 되지만 클릭이 안 되던 현상을 해결.
*   **이벤트 핸들링 로직 재설계 (Refactoring)**:
    *   부품 클릭 시 간헐적으로 이벤트가 무시되던 문제를 근본적으로 해결하기 위해, `onMouseDown` 전역 이벤트를 분리.
    *   `handleComponentMouseDown` 메서드를 신설하고 각 부품 생성 시 직접 이벤트를 연결(`el.onmousedown`)하여, 그 어떤 요소보다도 클릭 이벤트를 가장 먼저 수신하고 처리하도록 구조 개선.
    *   중복된 번역 키 코드 정리 및 코드 안정성 강화.
*   **버튼 미작동 문제 긴급 수정**:
    *   도구 상자의 버튼이 작동하지 않는 현상을 완전히 해결하기 위해, `addModule` 함수에 강력한 안전장치(Try-Catch)와 오류 알림 기능을 추가.
    *   HTML `onclick` 속성에 의존하던 방식을 보완하여, JavaScript 초기화 시점에 버튼 이벤트를 확실하게 이중으로 연결(`addEventListener`)하도록 구조 개선.
    *   `window.sim` 객체 연결을 생성자에서 강제로 수행하여 초기화 실패 가능성 차단.
*   **스크립트 중복 코드 삭제**:
    *   이전 수정 과정에서 발생한 약 160줄의 중복/손상 코드(함수 외부에 잘못 삽입된 코드)를 완전히 제거하여 스크립트 정상 로딩 복구.

### 🎨 디자인 개선 (Design)
*   **게이트 핀(전선 연결부) 위치 대칭 정렬**:
    *   입력 핀(in-1, in-2)을 게이트 왼쪽 면에 각각 높이의 1/3, 2/3 지점에 배치하여 대칭 유지.
    *   출력 핀(out)을 게이트 오른쪽 면 중앙에 정확히 배치.
    *   핀이 SVG 게이트 이미지와 정확히 일치하도록 `transform: translateY(-50%)`를 적용하여 허공에 뜨는 문제 해결.
